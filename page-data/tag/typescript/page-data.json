{"componentChunkName":"component---src-templates-tag-template-tsx","path":"/tag/typescript","webpackCompilationHash":"e0c28d36341eb122a484","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"path":"/projects/portfolio","title":"Portfolio","excerpt":"This website, statically generated by GatsbyJS and powered by it's own implementation of GraphQL, written in React and infused with styled-components. Deployed to GitHub Pages, served from my own domain.","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsSAAALEgHS3X78AAADFElEQVQ4y5VVS5LURhScy7j1L32rVK1f291NeGZMAHb4HnhvGntrRxCGhX0HwyEYcDh8BFYQAXjJERRK8pV6ht8AzSL1Sp9K5cusko5O774YT/54Pm5//W9c3zob17tH42b3eNzcfjxuz7Gbq1xz93Zv3bv9D88fjce/PxlP770cj3jAyZ1nUP0PyNMOuv4aWdUgypeI0gZJ0cEve4TZEiprEFYDAtZAWXhJDV9qmGP10wNc/esVjk7vvpxO7jydkvbaFEfl1Olhqop6SgszxYTK9JTmZkpyPcWCsp5UVXNs3HmUmmnhxdNw8++JhJMQUuFTqO4GvvIVirxBowdUuoMqGoLKqFaVjTuPlIafVBfwYo2Fn2B18z6u/jkrxLEQ9jd4Q7HNGtVy7VCy/aJeuVrZb1CYeZxVPXK+VKo8pzIDKrxo2RGm/ffwgpTeGNTtZka3hXFj1mbjYPsr7ppu1u5+Mxyj1O1lhLPCQM0KSzur0hw7kKDitXO1Ug1fJM/6FPJRhUXRwoqHZYeEycZEkgsajq2DnM+VqdOihbf38H3CBQk1zbeVpT8WqbFcPhpRphGXBkwdTNeFsQgLeFHJUKo3oVxGqLIahmS5kOolQqYakCCQ6sZMmSRvoD9OKC3HDGVoejRMN0utm7SgknN4exxMKA+kXINJ1bFVi4CTQ06MBFQnY++C+BBCTjLcblavoM3A2qMoW+dtlVsodhDs1bmamD3heylnw0woJsuere0afT2gtR2yukNOZGXt1mnOZGMSZawhbfECdfk6PG9ZEiyY6NJ06Lg0NBXG9FTI/H3Lrh7qoZhvtEW3pEISVrKHuUtUdwURyT2+8ItCEcLaLLFi2i0JGvqYcR/7HyyZAwmlpaK0DKSdW2Y4MT8E/n4hv932ZwllQihJJjOxH81eXRC9Q/YZQtkpsndjSe4d4z+BRLuPyoffw+46/DBFTc9SKpSkXYtR8Qns97IXX7JsVj8i5NuCdOn+EweB/5Qob1HQa/mnfDcrfAH+9bD95V9sfn6Iza2zL8PuDFvi29+e4PTe/3gNd/NWv6f9SNIAAAAASUVORK5CYII=","aspectRatio":0.8875576036866359,"src":"/static/bf0bf287bff074eaa90c06f730c1384b/3beb5/portfolio.png","srcSet":"/static/bf0bf287bff074eaa90c06f730c1384b/86817/portfolio.png 240w,\n/static/bf0bf287bff074eaa90c06f730c1384b/a74bb/portfolio.png 480w,\n/static/bf0bf287bff074eaa90c06f730c1384b/3beb5/portfolio.png 960w,\n/static/bf0bf287bff074eaa90c06f730c1384b/43380/portfolio.png 1440w,\n/static/bf0bf287bff074eaa90c06f730c1384b/16145/portfolio.png 1920w,\n/static/bf0bf287bff074eaa90c06f730c1384b/c11f5/portfolio.png 3852w","sizes":"(max-width: 960px) 100vw, 960px"}}},"featuredVideo":null,"date":"2019-09-23T00:00:00.000Z","tags":["HTML","JavaScript","TypeScript","React"]},"wordCount":{"words":267,"sentences":18,"paragraphs":6},"timeToRead":3,"excerpt":"A few years back, in my first year of college, I opted for Wordpress. I had no experience with programming at all, but ended up also…","id":"5eda0c09-b6a7-5e9c-b875-b0d004aeeaff","html":"<p>A few years back, in my first year of college, I opted for Wordpress. I had no experience with programming at all, but ended up also building my own theme. This knowledge proved useful later on. For the longest time I didn't really need my own website / domain, it was mainly required for hosting some (temporal) projects or demo's, if required.</p>\n<p>Fast forward to 2019: this website, built with Gatsby. All the freedom I had when building my own Wordpress theme, only now in a language I like more. For example, this is the (/projects) page you just came from:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> StaticQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Layout <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/layout'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Grid <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/Grid'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> IEdge<span class=\"token punctuation\">,</span> IProjectsAllMarkdownRemark <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../templates/interfaces'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ProjectCard <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/ProjectCard'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">SEO</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/seo'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> CenteredBlock <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/CenteredBlock'</span>\n\n<span class=\"token comment\">// tslint:disable-next-line: no-void-expression</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PAGE_QUERY</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query {\n    projectsData: allMarkdownRemark(\n      filter: { frontmatter: { path: { regex: \"/projects/\" } } }\n      sort: { fields: frontmatter___date, order: DESC }\n    ) {\n      edges {\n        node {\n          frontmatter {\n            path\n            title\n            featuredVideo\n            featuredImage {\n              childImageSharp {\n                fluid(maxWidth: 960) {\n                  ...GatsbyImageSharpFluid\n                }\n              }\n            }\n            excerpt\n            tags\n            date\n          }\n          wordCount {\n            words\n            sentences\n            paragraphs\n          }\n          timeToRead\n          excerpt\n          id\n        }\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ProjectsList</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSX</span><span class=\"token punctuation\">.</span>Element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">JSX</span><span class=\"token punctuation\">.</span><span class=\"token parameter\">Element</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SEO</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Projects<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>These are some projects I did<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CenteredBlock</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hey! These are some of my projects</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          In chronological order, from newest to oldest. These are some projects\n          I worked on that I am proud of, that taught me a lot and / or got me\n          some decent grades. Not everything in here has to do with programming.\n          I also included some projects I made using Adobe Illustrator and After\n          Effects. The first projects were part of courses in a timeframe of\n          about 10 weeks. That meant going from 0 - 100 in roughly 10 weeks,\n          allocating time for other courses as well (about 4 at a time).\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CenteredBlock</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Grid</span></span>\n        <span class=\"token attr-name\">columns</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'repeat(auto-fill, minmax(32rem,1fr))'</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">maxWidth</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'100rem'</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        &lt;StaticQuery\n          query=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">PAGE_QUERY</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          render=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            projectsData<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            projectsData<span class=\"token punctuation\">:</span> IProjectsAllMarkdownRemark\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">JSX</span><span class=\"token punctuation\">.</span>Element<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> projectsData<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n              <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> frontmatter<span class=\"token punctuation\">,</span> timeToRead <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span> IEdge<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ProjectCard</span></span>\n                  <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span>\n                  <span class=\"token attr-name\">tags</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>frontmatter<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">}</span></span>\n                  <span class=\"token attr-name\">video</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>frontmatter<span class=\"token punctuation\">.</span>featuredVideo<span class=\"token punctuation\">}</span></span>\n                  <span class=\"token attr-name\">image</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>frontmatter<span class=\"token punctuation\">.</span>featuredImage<span class=\"token punctuation\">}</span></span>\n                  <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span>\n                  <span class=\"token attr-name\">body</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>frontmatter<span class=\"token punctuation\">.</span>excerpt<span class=\"token punctuation\">}</span></span>\n                  <span class=\"token attr-name\">timeToRead</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>timeToRead<span class=\"token punctuation\">}</span></span>\n                  <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>frontmatter<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">}</span></span>\n                  <span class=\"token attr-name\">date</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>frontmatter<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">}</span></span>\n                <span class=\"token punctuation\">/></span></span>\n              <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        />\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Grid</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// tslint:disable-next-line: no-default-export</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ProjectsList</code></pre></div>\n<p>Some stuff is hardcoded, just for the sake of simplicity. I also have to use some tslint rule overrides to surpress unintended linting errors when working with GraphQL and the default exports Gatsby requires to build pages. Posts are written in Markdown and imported using Gatsby plugins <code class=\"language-text\">gatsby-transformer-remark</code>, <code class=\"language-text\">gatsby-remark-images</code> and <code class=\"language-text\">gatsby-remark-sharp</code>.</p>\n<p>The main downside I find using Markdown is that I can't guarantee type safety in my TypeScript files. If I were to just use JS Objects to hold post data, I'd easily be able to typedef them. When it comes to Markdown, and how Gatsby generates the GraphQL schema, it's just as unsafe as just using JavaScript. This exact post (or at least the frontmatter, the main body is set using <code class=\"language-text\">&lt;main dangerouslySetInnerHTML={{ __html: html }} /&gt;</code>), for example, looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token hr punctuation\">---</span>\npath: '/projects/portfolio'\ndate: 2019-08-23\ntitle: 'Portfolio'\nfeaturedImage: '../../images/projects/portfolio.png'\ntags: ['HTML', 'JavaScript', 'TypeScript', 'React']\n<span class=\"token title important\">excerpt: \"This website, statically generated by GatsbyJS and powered by it's own implementation of GraphQL, written in React and infused with styled-components. Deployed to GitHub Pages, served from my own domain.\"\n<span class=\"token punctuation\">---</span></span></code></pre></div>\n<p>A single typo could break the import. I don't want to have to mark every frontmatter property as optional, like <code class=\"language-text\">{ excerpt?: string }</code>. The obvious upside is the ease-of-use when comparing it to complex structuring like:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> PostType <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  title<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  featuredImage<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  featuredVideo<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  path<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  tags<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  date<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  body<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> UrlObject <span class=\"token operator\">|</span> ImageObject <span class=\"token operator\">|</span> MarkdownObject <span class=\"token operator\">|</span> SomeOtherObject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// for example.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In this case, <code class=\"language-text\">body</code> would become an unmaintainable mess very quickly.</p>"}},{"node":{"frontmatter":{"path":"/projects/phyxapi","title":"PHYX API","excerpt":"This is my first major project stepping out of front-end development. Everything I have made up until this point has focussed, in some way, on visual design. The only visual aspect of this project is the GraphiQL portal that's made available to communicate with the server. The stack consists of Apollo Server (GraphQL), TypeScript and a Dependency Injection Container. This is a project for me to experiment with architecture, TDD & SOLID principles. I still have a lot to learn.","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACmUlEQVQ4y4WTS3LTQBCGcxhsvWdGsl6WFCc2tmP7CFAhIZUFG4olW6gCtgmXoIoTcITABs5AfA2Vfv6WHAMVO1l8np625u/H9Bysrm/r5dVtvfr0q158uKmn778/ymzLj3r67qaef/xZi45wwB+cXK8xWl0iGUawTAlXD+EQ13TYinvV+QTZ2yqHrQtYbggzv8Dq8xqiJYLN4up3ky9eNXFQNVVVNpMjrmXRVIWsh002rJqUxEXZ4odJ46q48Uza2K7fmOlps7peN6LVZrgg+eISgyBBlBXIyhJhnEOHGUyU086gBxl8ncM3hHbQMoSnNMLZGbP7myGWJJ6/xEAnSPIScS4lpui5UUvfHXR4tL3OtgQvQa/vwUxftILLreAVBRcXmBRDnByPMSkPYXQGxR4plcHxByRucVmFYBMnSGHZwVZwm6EQzs7hqwSDqEDKi8jCIaKwQBJVSLhPuZf/NAMFzN7h6rEFjqt3Ca4R0hnwQFaNkbNvIqoo4sWjVlACxEQyk7Itwadt+bsFxWlHKVRyjJCRjU65smyT8WC8FbFpbwn2CC7bks9g/JCXwZ557JXf4TCL9vBdVv9gP5jh01OORYykmnEsCkaP7+EIarNKEAa3nGC3oKbTcRXipILKSngs378jlHUze5zJUGy2xU1GDBDt76HH6IYfRRTQvEmXPZQ+teWxDf+XGz9SMntou4aXUMEPur5ZG/o7+td/6JblUhK+lFANkMRF+9x8ZijzJuLt3HGIPdp+kLaIz2UP92TIW56fI0qPMB7NUPL5yRCHm0EWXPYsUJ2tiNkMdr99KWf3BfXkOayezadkGFWhxw87VIsc7G/src/R6D3pQ4+f3Rccv/2Gw9dfMHrzFUc72OvnGTl7p/MH9suq/khuCW0AAAAASUVORK5CYII=","aspectRatio":1.0986601705237515,"src":"/static/f314d0b4a656475f8a6709c3bf839e03/3beb5/phyx_api.png","srcSet":"/static/f314d0b4a656475f8a6709c3bf839e03/86817/phyx_api.png 240w,\n/static/f314d0b4a656475f8a6709c3bf839e03/a74bb/phyx_api.png 480w,\n/static/f314d0b4a656475f8a6709c3bf839e03/3beb5/phyx_api.png 960w,\n/static/f314d0b4a656475f8a6709c3bf839e03/43380/phyx_api.png 1440w,\n/static/f314d0b4a656475f8a6709c3bf839e03/16145/phyx_api.png 1920w,\n/static/f314d0b4a656475f8a6709c3bf839e03/44870/phyx_api.png 3608w","sizes":"(max-width: 960px) 100vw, 960px"}}},"featuredVideo":null,"date":"2019-03-01T00:00:00.000Z","tags":["TypeScript","GraphQL"]},"wordCount":{"words":448,"sentences":29,"paragraphs":11},"timeToRead":5,"excerpt":"This project is all about games I play, used to play, or like to watch. All games have a different signature, feature set and playstyle. For…","id":"a7547245-1e37-53eb-ab3d-949c89bcd5ff","html":"<p>This project is all about games I play, used to play, or like to watch. All games have a different signature, feature set and playstyle. For example: CS:GO implements an in-match economy system, while R6 Siege and Apex Legends have Operators / Legends with unique abilities. All these games have an e-sports scene around them and require some form of tactic to be played properly.</p>\n<p>The plan for API is to provide a service for a front-end to connect to, doing validation of submitted \"strategies\" in a different way for each feature. There is no \"one size fits all\", aside from some generic <code class=\"language-text\">ItemValidators</code>. This is what defines the structure for this application. Every game that gets added, would just have a specific contract to match. The core of the application then builds the entire GraphQL API from all the <code class=\"language-text\">Features</code> in <code class=\"language-text\">features/gameFolder/index.ts</code>, using the following contract:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// importFeatures.ts</span>\n<span class=\"token keyword\">import</span> fs <span class=\"token keyword\">from</span> <span class=\"token string\">'fs'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> GraphQLSchema <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'graphql'</span>\n\n<span class=\"token keyword\">type</span> FeatureModule <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> schema<span class=\"token punctuation\">:</span> GraphQLSchema<span class=\"token punctuation\">;</span> context<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> Object <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> ImportFeaturesObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  featureSchemas<span class=\"token punctuation\">:</span> GraphQLSchema<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  featureContexts<span class=\"token punctuation\">:</span> Object<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">importFeatures</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>ImportFeaturesObject<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> featureFolders<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src/features'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> featureSchemas<span class=\"token punctuation\">:</span> GraphQLSchema<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> featureContexts<span class=\"token punctuation\">:</span> Object<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">await</span> featureFolders<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">folder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">~src/features/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>folder<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">module</span><span class=\"token punctuation\">:</span> FeatureModule</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> schema<span class=\"token punctuation\">:</span> GraphQLSchema <span class=\"token operator\">=</span> <span class=\"token keyword\">module</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>schema\n        <span class=\"token keyword\">const</span> context<span class=\"token punctuation\">:</span> Object <span class=\"token operator\">|</span> undefined <span class=\"token operator\">=</span> <span class=\"token keyword\">module</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">.</span>context\n\n        featureSchemas<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>schema<span class=\"token punctuation\">)</span>\n        context <span class=\"token operator\">&amp;&amp;</span> featureContexts<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">:</span> Error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> error\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> <span class=\"token punctuation\">{</span> featureSchemas<span class=\"token punctuation\">,</span> featureContexts <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then, every game just needs to have an <code class=\"language-text\">index.ts</code> file, looking something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// features/apex-legends/index.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FeatureExport <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'~src/types/FeatureExport'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApexLegendsGraphQLShema <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./graphql/ApexLegendsGraphQLSchema'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApexLegendsContainer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./di/ApexLegendsDI'</span>\n\n<span class=\"token keyword\">const</span> apexLegendsFeatureExport<span class=\"token punctuation\">:</span> FeatureExport <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  schema<span class=\"token punctuation\">:</span> ApexLegendsContainer<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>ApexLegendsGraphQLShema<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>schema<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// tslint:disable-next-line: no-default-export</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> apexLegendsFeatureExport</code></pre></div>\n<p>In this example, no <code class=\"language-text\">context</code> is exported. Just the GraphQL schema. The feature itself then has to implement things like validation and a database. As of right now every feature in this hobby project is built with MongoDB as the database provider, and the core of the API establishes that connection. I would like to experiment with SQL, but have no plans to do so.</p>\n<p>What I am struggling with, however, is the fact that I currently have 3 layers of typedefs: TypeScript types, the GraphQL schema and the Mongoose schema. Keeping that all in sync has turned out to be a hassle and I am currently looking for a way to improve on that front.</p>\n<p>This structure for \"Feature\" folders is different to allow me to experiment a lot. For example, I found this sweet post on Medium that made me want to try out <a href=\"https://medium.com/@OlegVaraksin/minimalistic-dependency-injection-di-container-in-typescript-2ce93d1c303b\">a TypeScript DI system</a> using <code class=\"language-text\">reflect-metadata</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// tiny-di.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'reflect-metadata'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Type</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">T</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> GenericClassDecorator<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">:</span> <span class=\"token constant\">T</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token function-variable function\">InjectableType</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> GenericClassDecorator<span class=\"token operator\">&lt;</span>Type<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">>></span>\n\n<span class=\"token comment\">/**\n * **$DIContainer**\n * @property injectables: a Map of all resolved Injectables using the Injectable(containerRef) Decorator\n * @method register: a method to call inside the Injectable decorator to add a dependency to the list\n * @method resolve&lt;T> construct dependency from injectables (default), or resolve dependencies manually\n * @example\n * const FeatureDC = new $DIContainer() // Default, only registered dependencies will resolve using this Container construction\n * const FeatureDCWithAutoResolve = new $DIContainer({autoResolve: true}) // This will also resolve ANY dependency not explicitly listed in the 'registered' Map\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> $DIContainer <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\"><span class=\"token keyword\">private</span> _options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> autoResolve<span class=\"token punctuation\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> autoResolve<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  injectables<span class=\"token punctuation\">:</span> Map<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> Object<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">register</span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">:</span> Type<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> resolvedRegistree<span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">|</span> Object <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>resolvedRegistree<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>injectables<span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> resolvedRegistree<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  resolve<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">:</span> Type<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">T</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// tokens are required dependencies, while injections are resolved tokens from the DIContainer</span>\n    <span class=\"token keyword\">const</span> tokens<span class=\"token punctuation\">:</span> Type<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span>\n      Reflect<span class=\"token punctuation\">.</span><span class=\"token function\">getMetadata</span><span class=\"token punctuation\">(</span><span class=\"token string\">'design:paramtypes'</span><span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">const</span> injections<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>Object <span class=\"token operator\">|</span> <span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tokens<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">token<span class=\"token punctuation\">:</span> Type<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>injectables<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>injectables<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Dependency not available in registry: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>token<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_options<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_options<span class=\"token punctuation\">.</span>autoResolve<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">target</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>injections<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * **Injectable**\n * @param containers - Provide one (or more) DI Containers to register this dependency in. It is curried so that\n * @example\n * const FeatureDC = new $DIContainer()\n * const FeatureInjectable = Injectable(FeatureDC);\n *\n * at FeatureInjectable()\n * class FeatureModule {}\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Injectable</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>containers<span class=\"token punctuation\">:</span> $DIContainer<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> InjectableType <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">...</span>containers<span class=\"token punctuation\">:</span> $DIContainer<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">InjectableType</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">:</span> Type<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  target<span class=\"token punctuation\">:</span> Type<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\"><span class=\"token keyword\">void</span></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  containers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">container<span class=\"token punctuation\">:</span> $DIContainer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> container<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// do something with `target`, e.g. some kind of validation or passing it to the DIContainer and store them</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> DefaultDIContainer<span class=\"token punctuation\">:</span> $DIContainer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">$DIContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> DefaultInjectable<span class=\"token punctuation\">:</span> InjectableType <span class=\"token operator\">=</span> <span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span>DefaultDIContainer<span class=\"token punctuation\">)</span></code></pre></div>\n<p>I've chosen to export both default instances to the DI system, as well the classes to create my own. That all ties in to the structure of \"Features\" as independent entities. I would instantiate a DI Container inside a feature folder, allowing to only inject dependencies in said folder.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// ApexLegendsDI.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> $DIContainer<span class=\"token punctuation\">,</span> InjectableType<span class=\"token punctuation\">,</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'~src/tiny-di/tiny-di'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ApexLegendsContainer<span class=\"token punctuation\">:</span> $DIContainer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">$DIContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ApexLegendsInjectable<span class=\"token punctuation\">:</span> InjectableType <span class=\"token operator\">=</span> <span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span>\n  ApexLegendsContainer\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then, inside <code class=\"language-text\">features/apex-legends</code> files I would always import the <code class=\"language-text\">ApexLegendsInjectable()</code> decorator and use it as suggested.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// ApexLegendsGraphQLSchema.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> makeExecutableSchema <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'graphql-tools'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> GraphQLSchema <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'graphql'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApexLegendsTypeDefs <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./ApexLegendsTypeDefs'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApexLegendsResolvers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./ApexLegendsResolvers'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApexLegendsInjectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../di/ApexLegendsDI'</span>\n\n@<span class=\"token function\">ApexLegendsInjectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApexLegendsGraphQLShema</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> schema<span class=\"token punctuation\">:</span> GraphQLSchema\n\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">typeDefs<span class=\"token punctuation\">:</span> ApexLegendsTypeDefs<span class=\"token punctuation\">,</span> resolvers<span class=\"token punctuation\">:</span> ApexLegendsResolvers</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>schema <span class=\"token operator\">=</span> <span class=\"token function\">makeExecutableSchema</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      typeDefs<span class=\"token punctuation\">:</span> typeDefs<span class=\"token punctuation\">.</span>typeDefs<span class=\"token punctuation\">,</span>\n      resolvers<span class=\"token punctuation\">:</span> resolvers<span class=\"token punctuation\">.</span>resolvers<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The reason it passes <code class=\"language-text\">typeDefs.typeDefs</code> is because the DI system requires the use of classes. The typeDefs class actually looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ITypeDefinitions <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'graphql-tools'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApexLegendsInjectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../di/ApexLegendsDI'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getGQLTypes <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'~src/utils/getGQLTypes'</span>\n\n@<span class=\"token function\">ApexLegendsInjectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApexLegendsTypeDefs</span> <span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">:</span> ITypeDefinitions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">getGQLTypes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src/graphql/shared.types.gql'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">getGQLTypes</span><span class=\"token punctuation\">(</span>__dirname <span class=\"token operator\">+</span> <span class=\"token string\">'/ApexLegends.types.gql'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">getGQLTypes</span><span class=\"token punctuation\">(</span>__dirname <span class=\"token operator\">+</span> <span class=\"token string\">'/ApexLegendsItem.types.gql'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">getGQLTypes</span><span class=\"token punctuation\">(</span>__dirname <span class=\"token operator\">+</span> <span class=\"token string\">'/ApexLegendsLegend.types.gql'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And finally, building said feature as shown up top. I love this way of working with TypeScript as it allows me to not have to manually construct any class inside the feature folder. I still have the flexibility to do so, if required for testing purposes or whatever. a</p>\n<p>Full code for this project is <a href=\"https://github.com/CSMR-DB/phyx-api\">available on GitHub</a></p>"}}]},"markdownRemark":{"frontmatter":{"path":"/tag/","title":"TypeScript","excerpt":"I absolutely love it. I understand TypeScript's limits but having the compile-time safety has proven to be a huge time-saver, especially when using the strictest tsconfig imagineable. Combining the power of Reflect-metadata with Decorators to create a tiny DI system is awesome. I am looking forward to potentially getting Regex types, or anything that would provide finer grained control over exact type structure.","level":3,"time":600}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"tag":"TypeScript"}}}